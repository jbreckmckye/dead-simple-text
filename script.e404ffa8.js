parcelRequire=function(e){var r="function"==typeof parcelRequire&&parcelRequire,n="function"==typeof require&&require,i={};function u(e,u){if(e in i)return i[e];var t="function"==typeof parcelRequire&&parcelRequire;if(!u&&t)return t(e,!0);if(r)return r(e,!0);if(n&&"string"==typeof e)return n(e);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}return u.register=function(e,r){i[e]=r},i=e(u),u.modules=i,u}(function (require) {var i,f,e={};function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function A(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}Object.defineProperty(e,"__esModule",{value:!0}),function(e){e.NEW_FILE="new_file",e.OPEN_FILE="open_file",e.SAVE_FILE="save_file",e.INSERT_TAB="insert_tab",e.LENGTH_CHANGE="length_change",e.UNINSERT_TAB="uninsert_tab"}(f=i||(i={},e.ViewEvents=i));var v=function(){function e(){var t=this;B(this,e),this.addEventListener=function(e,t){document.body.addEventListener(e,t,!1)},this.focusContent=function(){t.textarea.focus()},this.getContent=function(){return t.textarea.value},this.getCursor=function(){return[t.textarea.selectionStart,t.textarea.selectionEnd]},this.getFilename=function(){return t.filename.value},this.getCursorPosition=function(){return t.textarea.selectionStart},this.removeEventListener=function(e,t){document.body.removeEventListener(e,t)},this.setContent=function(e){t.textarea.value=e},this.setCursor=function(e,n){t.textarea.setSelectionRange(e,n)},this.setFilenameText=function(e){t.filename.value=e},this.setUIReady=function(){t.toolbar.classList.remove("toolbar--loading")},this.textChangedFlag=!1,this.toolbar=this.getEl("toolbar"),this.filename=this.getEl("filename"),this.fileNew=this.getEl("fileNew"),this.fileOpen=this.getEl("fileOpen"),this.fileSave=this.getEl("fileSave"),this.textarea=this.getEl("textarea"),this.fileOpenHelper=document.createElement("input"),this.fileOpenHelper.type="file",this.fileOpenHelper.accept=".css,.markdown,.md,.js,.json,.jsx,.scss,.svg,.ts,.tsx,.txt,.xml",this.shiftOn=!1,this.addEvents()}return A(e,[{key:"getEl",value:function(e){var t=document.getElementById(e);if(t)return t;throw new Error("No element found for selector ".concat(e))}},{key:"addEvents",value:function(){var e=this;this.fileOpen.addEventListener("click",function(){e.fileOpenHelper.click()},!1),this.fileOpenHelper.addEventListener("change",function(){e.fileOpenHelper.files&&e.dispatchEvent(f.OPEN_FILE,e.fileOpenHelper.files[0])},!1),this.fileSave.addEventListener("click",function(){e.dispatchEvent(f.SAVE_FILE)}),this.fileNew.addEventListener("click",function(){e.dispatchEvent(f.NEW_FILE)}),this.textarea.addEventListener("input",function(){e.textChangedFlag||(e.textChangedFlag=!0)}),this.textarea.addEventListener("keydown",function(t){"Tab"==t.key?(t.preventDefault(),e.shiftOn?e.dispatchEvent(f.UNINSERT_TAB):e.dispatchEvent(f.INSERT_TAB)):"F6"==t.key?(t.preventDefault(),e.fileNew.focus()):"Shift"==t.key&&(e.shiftOn=!0)}),this.textarea.addEventListener("keyup",function(t){"Shift"==t.key&&(e.shiftOn=!1)})}},{key:"dispatchEvent",value:function(e,t){var n=u(t)?{detail:t}:void 0,i=new CustomEvent(e,n);document.body.dispatchEvent(i)}}]),e}(),t=v;function u(e){return null!=e}e.default=t;var d={};Object.defineProperty(d,"__esModule",{value:!0});var s={type:"text/plain;charset=utf-8"},h=document.createElement("a");function q(e){return new Promise(function($,r){var t=new FileReader;t.onload=function(){return $(t.result)},t.onerror=function(e){return r(e)},t.readAsText(e)})}var n=q;function C(e,$){var r=new Blob([e],s),t=URL.createObjectURL(r);h.href=t,h.download=$,h.click(),URL.revokeObjectURL(t)}d.readFile=n;var m=C;function w(e){var $=e.match(/(\s)+$/g);return $?e.substr(0,$.index):e}d.saveFile=m;var k=w;function r(e){return e.split(/\r\n|\r|\n/)}d.trimEnd=k;var g=r;d.toLines=g;var c={};function j(e,r){return y(e)||x(e,r)||p()}function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function x(e,r){var $=[],t=!0,a=!1,n=void 0;try{for(var i,s=e[Symbol.iterator]();!(t=(i=s.next()).done)&&($.push(i.value),!r||$.length!==r);t=!0);}catch(e){a=!0,n=e}finally{try{t||null==s.return||s.return()}finally{if(a)throw n}}return $}function y(e){if(Array.isArray(e))return e}var z=c&&c.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var $ in e)Object.hasOwnProperty.call(e,$)&&(r[$]=e[$]);return r.default=e,r};Object.defineProperty(c,"__esModule",{value:!0});var a=z(e),b=new a.default;function o(){b.setFilenameText("Dead Simple Text.txt"),b.setContent("")}b.addEventListener(a.ViewEvents.NEW_FILE,o),b.addEventListener(a.ViewEvents.OPEN_FILE,function(e){var r=e.detail;r&&n(r).then(function(e){b.setFilenameText(r.name),b.setContent(e),b.focusContent()})}),b.addEventListener(a.ViewEvents.SAVE_FILE,function(){var e=b.getFilename();if(e.length){var r=b.getContent(),$=k(r);m($,e)}else window.alert("Please provide a filename")}),b.addEventListener(a.ViewEvents.INSERT_TAB,function(e){var r=j(b.getCursor(),2),$=r[0],t=r[1],a=b.getContent(),n="    ";if($==t)document.execCommand("insertText",void 0,n);else{for(var i=g(a),s="",v=0,o=0,l=!1,C=0;C<i.length;C++){var U=v,u=v+i[C].length+1;C>0&&(s+="\n"),u>$&&U<t&&(s+=n,o++),U==$&&(l=!0),s+=i[C],v=u}document.execCommand("selectAll"),document.execCommand("insertText",void 0,s);var w=l?$:$+n.length,d=t+o*n.length;b.setCursor(w,d)}}),b.addEventListener(a.ViewEvents.UNINSERT_TAB,function(e){var r=j(b.getCursor(),2),$=r[0],t=r[1],a=b.getContent(),n=/^    /g;if($!=t){for(var i=g(a),s="",v=0,o=0,l=!1,C=0;C<i.length;C++){var U=i[C],u=v,w=v+U.length+1,d=U;C>0&&(s+="\n"),w>$&&u<t&&(d=U.replace(n,"")),u==$&&(l=!0),s+=d,o+=U.length-d.length,v=w}document.execCommand("selectAll"),document.execCommand("insertText",void 0,s);var c=l?$:$-4,_=t-o;b.setCursor(c,_)}}),o(),b.setUIReady();if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=c}else if(typeof define==="function"&&define.amd){define(function(){return c})}return{"3UCs":c};});